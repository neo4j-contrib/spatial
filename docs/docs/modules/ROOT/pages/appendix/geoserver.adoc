[[spatial-geoserver]]
= Neo4j Spatial in GeoServer

Neo4j Spatial provides built-in support for GeoTools data store, making it directly usable inside GeoServer for publishing and visualizing spatial data.

== Prerequisites

* GeoServer (download from http://geoserver.org)
* Neo4j database with Neo4j Spatial plugin
* Neo4j Spatial layers configured in your database

== Installation and Setup

=== Building the Plugin

----
mvn clean package
----

=== Deployment

. Copy the `neo4j-spatial-geotools-plugin-xxx-SNAPSHOT-with-dependencies.jar` form:

  * Option A: `geotools-plugin/target/`
  * Option B: the https://github.com/neo4j-contrib/spatial/releases[GitHub releases page]

+
into `$GEOSERVER_HOME/webapps/geoserver/WEB-INF/lib`
. Restart GeoServer
. Open the GeoServer admin interface at http://localhost:8080/geoserver/web/

=== Configuration

==== Create Workspace
. Login to GeoServer (default: admin/geoserver)
. Create a new workspace for your Neo4j data

==== Add Data Source
. Go to 'Stores' → 'Add new Store'
+
image::Geoserver-1-logged-in.png[]
. Select 'Neo4j' under Vector Data Sources
+
image::Geoserver-2-add-new-store.png[]
. Configure the Neo4j connection:
+
image::Geoserver-3-configure-store.png[]
   * *Database URI*: Connection string to your Neo4j database
   * *Username/Password*: Neo4j credentials

==== Publish Layers
. Go to 'Layers' → 'Add new leyer'
. Choose your Neo4j datastore
. Select a layer by clicking 'Publish'
+
image::Geoserver-4-publish-layer.png[]
. Configure layer settings:
   * Click 'Compute from data' for a native bounding box
   * Click 'Compute from native bounds' for a Lat/Lon bounding box
. Save the layer

== Usage

=== Preview Layers
* Single layer: Go to 'Layer Preview' → select layer → 'OpenLayers'

== Development Testing

For testing with GeoServer source code:

. Check out GeoServer source
. Add Neo4j profile to `src/web/app/pom.xml`:
+
[source,xml,subs="attributes+"]
----
<profile>
  <id>neo4j</id>
  <dependencies>
    <dependency>
      <groupId>org.neo4j</groupId>
      <artifactId>neo4j-spatial-geotools-plugin</artifactId>
      <version>{docs-version}</version>
    </dependency>
  </dependencies>
</profile>
----

. Run with profile:
+
[source,shell]
----
cd src/web/app
mvn jetty:run -Pneo4j
----
